# CI/CD Pipeline Documentation\n\n## üöÄ Green Theme Hello World Fullstack - CI/CD Setup\n\nThis document describes the continuous integration and continuous deployment (CI/CD) pipeline for the Green Theme Hello World Fullstack Application.\n\n## üìã Pipeline Overview\n\nThe CI/CD pipeline consists of multiple workflows that ensure code quality, security, and deployment readiness:\n\n### 1. Main CI Pipeline (`.github/workflows/ci.yml`)\n\nTriggered on:\n- Push to `main` and `develop` branches\n- Pull requests to `main` and `develop` branches\n- Manual workflow dispatch\n\n**Jobs:**\n- `frontend-tests`: React + Vitest testing with coverage\n- `backend-tests`: FastAPI + pytest testing with coverage\n- `integration-tests`: Docker Compose full-stack testing\n- `security-checks`: Vulnerability scanning and security audits\n- `deployment-readiness`: Final validation and artifact verification\n- `notify`: Success/failure notifications\n\n### 2. PR Quick Checks (`.github/workflows/pr-checks.yml`)\n\nTriggered on:\n- Pull request events (opened, synchronize, reopened)\n\n**Jobs:**\n- `quick-checks`: Fast syntax and build validation\n- `dependency-security`: Security scanning for dependencies\n\n## üß™ Testing Strategy\n\n### Frontend Testing\n- **Framework**: Vitest + React Testing Library\n- **Coverage**: Comprehensive unit and integration tests\n- **Linting**: ESLint with React-specific rules\n- **Build Validation**: Production build verification\n\n**Commands:**\n```bash\ncd frontend\nnpm run test          # Run all tests\nnpm run test:coverage # Run tests with coverage\nnpm run lint          # Run ESLint\nnpm run build         # Production build\n```\n\n### Backend Testing\n- **Framework**: pytest + FastAPI TestClient\n- **Coverage**: Unit tests for all API endpoints\n- **Async Testing**: pytest-asyncio for async endpoints\n- **Mocking**: pytest-mock for external dependencies\n\n**Commands:**\n```bash\ncd backend\npytest --cov=. --cov-report=html -v  # Run tests with coverage\npython -m pytest -x                   # Stop on first failure\npytest --tb=short                     # Short traceback format\n```\n\n### Integration Testing\n- **Docker Compose**: Full-stack service orchestration\n- **Health Checks**: Service availability validation\n- **API Testing**: End-to-end API connectivity\n- **Frontend-Backend Integration**: Complete user workflow validation\n\n## üîí Security & Quality Checks\n\n### Vulnerability Scanning\n- **Trivy**: Filesystem and dependency vulnerability scanning\n- **Safety**: Python package security checking\n- **npm audit**: Node.js dependency security audit\n- **SARIF Upload**: Security findings integration with GitHub Security tab\n\n### Code Quality\n- **ESLint**: JavaScript code quality and consistency\n- **Python syntax validation**: Import and syntax checking\n- **Build validation**: Successful compilation verification\n\n## üìä Coverage Reporting\n\n- **Frontend Coverage**: Vitest coverage with lcov format\n- **Backend Coverage**: pytest-cov with XML and HTML reports\n- **Codecov Integration**: Automated coverage report uploads\n- **Coverage Artifacts**: HTML reports stored as workflow artifacts\n\n## üê≥ Docker Configuration\n\n### Development\n```bash\ndocker-compose up -d              # Start development services\ndocker-compose --profile dev up   # Start with development frontend\n```\n\n### CI Testing\n```bash\ndocker-compose -f docker-compose.ci.yml up -d  # CI-optimized setup\n```\n\n### Production\n```bash\ndocker-compose --profile prod up  # Production build\n```\n\n## üèóÔ∏è Caching Strategy\n\nThe pipeline implements aggressive caching to minimize build times:\n\n### Node.js Dependencies\n- **Cache Key**: `package-lock.json` hash\n- **Paths**: `node_modules`, npm cache\n- **Restoration**: Multi-level fallback strategy\n\n### Python Dependencies\n- **Cache Key**: `requirements.txt` hash\n- **Paths**: `~/.cache/pip`\n- **Restoration**: Pip cache directory\n\n### Docker Layers\n- **BuildKit**: Advanced Docker layer caching\n- **Registry Caching**: Layer reuse between builds\n- **Multi-stage**: Optimized image building\n\n## üìà Workflow Optimization\n\n### Parallel Execution\n- Frontend and backend tests run in parallel\n- Independent job execution where possible\n- Dependency-based job ordering\n\n### Fast Feedback\n- PR quick checks provide immediate validation\n- Syntax and build errors caught early\n- Security issues identified before full pipeline\n\n### Resource Efficiency\n- Conditional job execution based on triggers\n- Artifact cleanup and retention policies\n- Docker layer cleanup after builds\n\n## üîß Configuration Files\n\n### Frontend\n- `package.json`: Scripts and dependencies\n- `vitest.config.js`: Test configuration\n- `.eslintrc.cjs`: Linting rules\n- `vite.config.js`: Build configuration\n\n### Backend\n- `requirements.txt`: Python dependencies\n- `pytest.ini`: Test configuration\n- `Makefile`: Development commands\n\n### CI/CD\n- `.github/workflows/ci.yml`: Main CI pipeline\n- `.github/workflows/pr-checks.yml`: PR validation\n- `docker-compose.ci.yml`: CI-specific Docker setup\n\n## üö® Troubleshooting\n\n### Common Issues\n\n#### Frontend Build Failures\n```bash\n# Check Node.js version compatibility\nnode --version  # Should be 18.x\n\n# Clear npm cache\nnpm cache clean --force\n\n# Reinstall dependencies\nrm -rf node_modules package-lock.json\nnpm install\n```\n\n#### Backend Test Failures\n```bash\n# Check Python version\npython --version  # Should be 3.11.x\n\n# Reinstall dependencies\npip install --upgrade pip\npip install -r requirements.txt\n\n# Run specific test\npytest tests/test_main.py::test_specific_function -v\n```\n\n#### Docker Issues\n```bash\n# Clean Docker environment\ndocker system prune -f\ndocker-compose down -v\n\n# Rebuild images\ndocker-compose build --no-cache\n\n# Check service logs\ndocker-compose logs backend\ndocker-compose logs frontend\n```\n\n### Debugging CI Failures\n\n1. **Check Workflow Logs**: GitHub Actions ‚Üí Workflow run ‚Üí Job details\n2. **Artifact Downloads**: Test reports and coverage data\n3. **Security Findings**: GitHub Security tab for vulnerability reports\n4. **Coverage Reports**: Codecov dashboard for coverage trends\n\n## üéØ Success Metrics\n\n### Pipeline Health\n- ‚úÖ All tests passing\n- üîí No security vulnerabilities\n- üìä Coverage targets met\n- üê≥ Docker images building successfully\n- ‚ö° Build time < 10 minutes\n\n### Quality Gates\n- **Frontend**: ESLint passing, build successful, tests > 80% coverage\n- **Backend**: All tests passing, coverage > 85%\n- **Integration**: Services healthy, API connectivity verified\n- **Security**: No high/critical vulnerabilities\n\n## üîÑ Maintenance\n\n### Regular Updates\n- **Dependencies**: Monthly security updates\n- **Actions**: Quarterly GitHub Actions version updates\n- **Docker Images**: Base image updates for security patches\n- **Tools**: Keep testing and linting tools current\n\n### Monitoring\n- **Workflow Success Rate**: > 95%\n- **Build Duration**: Track and optimize\n- **Cache Hit Rate**: Monitor caching effectiveness\n- **Security Scan Results**: Weekly review\n\n---\n\n## üìû Support\n\nFor CI/CD pipeline issues:\n1. Check this documentation\n2. Review workflow logs in GitHub Actions\n3. Consult troubleshooting section\n4. Contact DevOps team for complex issues\n\n**Pipeline Status**: \n[![CI Pipeline](https://github.com/nadavyeramazon/ab-sdlc-agent-ai-backend/actions/workflows/ci.yml/badge.svg)](https://github.com/nadavyeramazon/ab-sdlc-agent-ai-backend/actions/workflows/ci.yml)\n[![PR Checks](https://github.com/nadavyeramazon/ab-sdlc-agent-ai-backend/actions/workflows/pr-checks.yml/badge.svg)](https://github.com/nadavyeramazon/ab-sdlc-agent-ai-backend/actions/workflows/pr-checks.yml)